<!DOCTYPE html>
    <head>
        <title>WIFI配网界面</title>
    </head>
    <body>
		<table align="center"  width="400px" height="100px" border="1">
			<td ></td>
			<td >wifi 密码配置</td>
			<tr>
				<td>wifi name</td>
				<td>
					<input type="text" id="wifiname" name="car_name" placeholder="ssid">
				</td>
			</tr>
			<tr>
				<td>wifi ssid</td>
				<td>
					<input type="text" id="wifissid" name="car_type" placeholder="password">
				</td>
			</tr>
				<td></td>
				<td align="center" ><button id ="send_WIFI" type="button" onclick="send_wifi()" >提交</button></td>
		</table>
    </body>
</html>
<script>
function setpath() {
    var default_path = document.getElementById("newfile").files[0].name;
    document.getElementById("filepath").value = default_path;
}

function send_wifi() {
    var input_name = document.getElementById("wifiname").value;
    var input_ssid = document.getElementById("wifissid").value;
    var xhttp = new XMLHttpRequest();
        xhttp.open("POST", "/wificonfig", true);
        xhttp.onreadystatechange = function() {
            if (xhttp.readyState == 4) {
                if (xhttp.status == 200) {
                    alert("WIFI配置完成,设备将会重启!!!");
                    console.log(xhttp.responseText);
                } else if (xhttp.status == 0) {
                    alert("Server closed the connection abruptly!");
                    location.reload()
                } else {
                    alert(xhttp.status + " Error!\n" + xhttp.responseText);
                    location.reload()
                }
            }
        };
    var data = {
        "wifi_name":input_name,
        "wifi_ssid":input_ssid
    }
    xhttp.send(JSON.stringify(data));
}
</script>
